webpackJsonp([5],{"7TDI":function(e,s){},dAjm:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("Dd8w"),o=t.n(a),r=t("Xxa5"),n=t.n(r),i=t("exGp"),l=t.n(i),d=t("//Fk"),c=t.n(d),u=t("NYxO"),p={data:function(){return{headerModule:[{title:"首页",Select:!1,icon:"ios-home-outline",href:"home"},{title:"分类",Select:!1,icon:"md-list-box",href:"class"},{title:"关于",Select:!1,icon:"ios-contact-outline",href:"about"},{title:"简历",Select:!1,icon:"ios-paper-outline",href:"resume"}],UserModel:[{title:"后台管理",icon:"ios-paper-outline"},{title:"更换头像",icon:"ios-camera-outline"},{title:"修改密码",icon:"ios-key-outline"},{title:"退出登录",icon:"ios-exit-outline"}],downloadItemName:"首页",Oldindex:1,transtationModule:{show:!1},Modal:!1,ModalEvent:"",user:{userName:"",passWord:""},imgSrc:"",showUpload:!1,Uping:!1,SendData:new FormData,LoginData:null,modelUrl:"",showUser:!0,showLogin:!1,successLoginText:"",sucessLoginHref:"",editPhoto:!1,loading:!1,RepleaseName:"",RepleaseEvent:"",oldpass:"",newpass:"",ErrorMessage:"",ShowrepleasePass:!1,ShowrepleaseAvatar:!1}},computed:o()({},Object(u.d)({userInfo:function(e){return e.userInfo}})),watch:{userInfo:function(e,s){null!=e?(this.showUser=!1,this.showLogin=!0,this.successLoginText=this.userInfo.userName,this.sucessLoginHref="http://http://47.106.110.151:4001/"+this.userInfo.href,sessionStorage.setItem("href",this.sucessLoginHref),sessionStorage.setItem("type",this.userInfo.type),console.log("已登录")):(this.showUser=!0,this.showLogin=!1,this.user.userName="",this.user.passWord="",this.imgSrc="")}},created:function(){},mounted:function(){this.transtationModule.show=!this.transtationModule.show,window.onresize=this.logihidden},methods:o()({},Object(u.b)({}),{downloadItem:function(e){this.headerModule[this.Oldindex].Select=!1;var s=window.event;this.headerModule[e].Select=!0,this.downloadItemName=s.target.innerText,this.Oldindex=e},logihidden:function(e){var s=e.target.window.innerWidth;this.transtationModule.show=!(s<768)},handleRender:function(e){console.log(this.userInfo);var s=e.target.innerText;this.ModalEvent=s,this.showUpload="注册"==this.ModalEvent,this.Modal=!0},regData:function(e,s){return!!(this.user.userName.length>5&&this.user.userName.length<16&&this.user.passWord.length>5&&this.user.passWord.length<16&&/^[A-Za-z]/.test(e[0]))},successLogin:function(e){this.$store.state.userInfo=e.data.result,this.$Message.success(e.data.msg),this.showUser=!1,this.showLogin=!0,this.successLoginText=e.data.userName,this.sucessLoginHref="http://http://47.106.110.151:4001/"+e.data.href,this.Modal=!1,this.SendData=new FormData},repleaseUser:function(){var e=this;return new c.a(function(s,t){if(e.regData(e.user.userName,e.user.passWord))if("注册"==e.ModalEvent)e.modelUrl="/server/register",e.SendData.set("userName",e.user.userName),e.SendData.set("passWord",e.user.passWord),s(e.SendData);else{e.modelUrl="/server/login";var a={userName:e.user.userName,passWord:e.user.passWord};e.LoginData=a,s(e.LoginData)}else t()}).then(function(s){e.axios(e.modelUrl,{method:"post",data:s}).then(function(s){return s.data.success?"注册成功"==s.data.msg?(e.Modal=!1,e.$Message.success(s.data.msg)):void(s.data.msg="登录成功"==s.data.msg?e.successLogin(s):e.$Message.warning(s.data.msg)):e.$Message.error(s.data.msg)}).catch(function(s){return e.$Message.error("请求超时")})}).catch(function(s){return e.$Message.error("请输入5-15位首字符为字母的用户名")})},UpData:function(e){this.SendData.set("file",e);var s=new FileReader,t=this;return s.onload=function(){t.imgSrc=this.result},s.readAsDataURL(e),this.Uping},RouterPush:function(e){console.log(e),this.$router.push({name:e})},doEach:function(e){"后台管理"==e?this.RouterPush("serverHome"):"更换头像"==e?this.repleaseUserInfo(e):"修改密码"==e?this.repleaseUserInfo(e):this.outLogin()},repleaseUserInfo:function(e){this.editPhoto=!0,this.RepleaseName=e,this.RepleaseEvent="修改密码"==this.RepleaseName?"修改":"更换";var s=this.RepleaseEvent;s="修改"==s?this.ShowrepleasePass=!0:this.ShowrepleaseAvatar=!0},repleaseUserInfosenddataSuccess:function(e){this.editPhoto=!1,this.$Message.success(e.msg),e.result&&(this.$store.state.userInfo=e.result)},RegPassword:function(){return this.oldpass.length>5&&this.oldpass.length<15&&this.newpass.length>5&&this.newpass.length<15||(this.ErrorMessage="请输入长度在5位以上16位以下的密码",!1)},RegAvatar:function(){return!!this.SendData.get("file")||(this.ErrorMessage="请选择头像",!1)},repleaseRegmodule:function(e){return"修改"==e?this.RegPassword():this.RegAvatar()},repleaseUserInfosenddata:function(){var e=this;return l()(n.a.mark(function s(){var t,a;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(e.repleaseRegmodule(e.RepleaseEvent)){s.next=2;break}return s.abrupt("return",e.$Message.error(e.ErrorMessage));case 2:if(e.loading=!0,"修改"!=e.RepleaseEvent){s.next=16;break}return s.prev=4,s.next=7,e.axios.post("/server/repleasePassword",{userName:e.userInfo.userName,oldpassword:e.oldpass,newpassword:e.newpass});case 7:(t=s.sent)&&(e.loading=!1,t=t.data.success?e.repleaseUserInfosenddataSuccess(t.data):e.$Message.error(t.data.msg)),s.next=14;break;case 11:return s.prev=11,s.t0=s.catch(4),s.abrupt("return",e.$Message.error("服务器异常"));case 14:s.next=21;break;case 16:return e.SendData.set("userName",e.userInfo.userName),s.next=19,e.axios.post("/server/repleaseAvatar",e.SendData);case 19:(a=s.sent)&&(e.loading=!1,a=a.data.success?e.repleaseUserInfosenddataSuccess(a.data):e.$Message.error(a.data.msg));case 21:case"end":return s.stop()}},s,e,[[4,11]])}))()},VisibileChange:function(e){e||(this.ShowrepleasePass=!1,this.ShowrepleaseAvatar=!1)},outLogin:function(){var e=this;return l()(n.a.mark(function s(){var t;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.axios.post("/server/loginOut");case 2:(t=s.sent)&&(e.$store.state.userInfo=t.data.result);case 4:case"end":return s.stop()}},s,e)}))()}})},h={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"header-modul"},[t("Row",{attrs:{"class-name":"header",alig:"middle",type:"flex"}},[t("i-col",{attrs:{xs:{span:5,push:2},lg:{span:0,offset:1},sm:{span:0,offset:0}}},[t("Dropdown",{attrs:{trigger:"click"},on:{"on-click":e.RouterPush}},[t("p",{staticClass:"header-p"},[e._v(e._s(e.downloadItemName)),t("Icon",{attrs:{type:"ios-folder-open"}})],1),e._v(" "),t("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.headerModule,function(s,a){return t("div",{on:{click:function(s){e.downloadItem(a)}}},[t("DropdownItem",{staticClass:"seticon",attrs:{name:s.href,selected:s.Select}},[t("Icon",{attrs:{size:"15",type:s.icon}}),e._v(e._s(s.title))],1)],1)}))],1)],1),e._v(" "),t("i-col",{attrs:{xs:{span:0},sm:{span:1,offset:2},md:{span:2}}},[t("div",{staticClass:"transtation-moule"},[t("transition",{attrs:{name:"slide-fade"}},[e.transtationModule.show?t("p",{staticClass:"solid"}):e._e()]),e._v(" "),t("transition",{attrs:{name:"top-fadeed"}},[e.transtationModule.show?t("span",[e._v("成长的足迹")]):e._e()]),e._v(" "),t("transition",{attrs:{name:"slide-fadeed"}},[e.transtationModule.show?t("p",{staticClass:"solid"}):e._e()])],1)]),e._v(" "),t("i-col",{attrs:{"class-name":"scale-down",xs:{span:0},sm:{span:11,push:3},md:{span:10}}},[t("Tabs",{staticStyle:{width:"420px"},on:{"on-click":e.RouterPush}},e._l(e.headerModule,function(e,s){return t("div",[t("TabPane",{attrs:{name:e.href,label:e.title,icon:e.icon}})],1)}))],1),e._v(" "),t("i-col",{attrs:{"class-name":"login-register",xs:{span:6,push:4},sm:{span:3,push:5},md:{span:3,push:5}}},[e.showUser?t("div",{staticClass:"showUser"},[t("Button",{attrs:{type:"info",ghost:""},on:{click:e.handleRender}},[e._v("登录")]),e._v(" "),t("Button",{attrs:{type:"info",ghost:""},on:{click:e.handleRender}},[e._v("注册")])],1):e._e(),e._v(" "),e.showLogin?t("div",{staticClass:"showLogin",attrs:{sryle:"margin-left:5px"}},[t("Avatar",{attrs:{src:e.sucessLoginHref}}),e._v(" "),t("Dropdown",{on:{"on-click":e.doEach}},[t("p",[e._v("欢迎！"),t("span",{staticStyle:{color:"rgb(87,197,247)"}},[e._v(e._s(e.successLoginText))])]),e._v(" "),t("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.UserModel,function(s,a){return t("DropdownItem",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-around"},attrs:{name:s.title}},[t("Icon",{attrs:{size:"15",type:s.icon}}),t("span",[e._v(e._s(s.title))])],1)}))],1)],1):e._e()])],1),e._v(" "),t("Modal",{attrs:{width:"360"},model:{value:e.Modal,callback:function(s){e.Modal=s},expression:"Modal"}},[t("p",{staticStyle:{color:"rgb(45,183,245)","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v(e._s(e.ModalEvent))])]),e._v(" "),t("div",{staticClass:"login-content"},[t("Input",{attrs:{prefix:"ios-contact",placeholder:"Enter your name"},model:{value:e.user.userName,callback:function(s){e.$set(e.user,"userName",s)},expression:"user.userName"}}),e._v(" "),t("Input",{attrs:{type:"password",prefix:"ios-key-outline",placeholder:"Enter your password"},model:{value:e.user.passWord,callback:function(s){e.$set(e.user,"passWord",s)},expression:"user.passWord"}}),e._v(" "),e.showUpload?t("div",{staticClass:"upload-box"},[t("div",{staticClass:"upload-img"},[t("img",{attrs:{src:e.imgSrc,alt:""}})]),e._v(" "),t("Upload",{staticStyle:{display:"inline-block",width:"58px"},attrs:{data:e.user,"before-upload":e.UpData,"show-upload-list":!1,format:["jpg","jpeg","png"],"max-size":2048,type:"drag",action:"/server/register"}},[t("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[t("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)])],1):e._e()],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"info",long:""},on:{click:e.repleaseUser}},[e._v(e._s(e.ModalEvent))])],1)]),e._v(" "),t("Modal",{attrs:{width:"360"},on:{"on-visible-change":e.VisibileChange},model:{value:e.editPhoto,callback:function(s){e.editPhoto=s},expression:"editPhoto"}},[t("p",{staticStyle:{color:"rgb(87,197,247)","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v(e._s(e.RepleaseName))])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.ShowrepleasePass,expression:"ShowrepleasePass"}],staticStyle:{display:"flex","flex-direction":"column","justify-content":"space-around","align-items":"center",height:"100px"}},[t("Input",{attrs:{type:"password",placeholder:"please enter you old password"},model:{value:e.oldpass,callback:function(s){e.oldpass=s},expression:"oldpass"}}),e._v(" "),t("Input",{attrs:{type:"password",placeholder:"please enter you new password"},model:{value:e.newpass,callback:function(s){e.newpass=s},expression:"newpass"}})],1),e._v(" "),e.ShowrepleaseAvatar?t("div",{staticClass:"upload-box"},[t("div",{staticClass:"upload-img"},[t("img",{attrs:{src:e.imgSrc,alt:""}})]),e._v(" "),t("Upload",{staticStyle:{display:"inline-block",width:"58px"},attrs:{"before-upload":e.UpData,"show-upload-list":!1,format:["jpg","jpeg","png"],"max-size":2048,type:"drag",action:"/server/register"}},[t("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[t("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)])],1):e._e(),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"info",size:"large",long:"",loading:e.loading},on:{click:e.repleaseUserInfosenddata}},[e._v(e._s(e.RepleaseEvent))])],1)])],1)},staticRenderFns:[]};var f={data:function(){return{}},computed:{},created:function(){this.$router.push({name:"home"}),this.userInfo(),this.GetnewsList()},components:{Header:t("VU/8")(p,h,!1,function(e){t("kQoj")},"data-v-9d3ff9fe",null).exports},methods:o()({},Object(u.b)({userInfo:"USERINFO",GetnewsList:"GETNEWSLIST"}))},g={render:function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"meta"},[s("Header"),this._v(" "),s("router-view")],1)},staticRenderFns:[]};var m=t("VU/8")(f,g,!1,function(e){t("7TDI")},"data-v-cf837dbc",null);s.default=m.exports},kQoj:function(e,s){}});
//# sourceMappingURL=5.0bdc7238f004dd20fc81.js.map